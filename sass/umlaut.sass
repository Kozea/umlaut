/* This file is part of umlaut

/* Copyright (C) 2013 Kozea - Mounier Florian <paradoxxx.zero->gmail.com>

/* umlaut is free software: you can redistribute it and/or modify
/* it under the terms of the GNU Affero General Public License as
/* published by the Free Software Foundation, either version 3 of the
/* License, or any later version.

/* umlaut is distributed in the hope that it will be useful,
/* but WITHOUT ANY WARRANTY; without even the implied warranty of
/* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
/* GNU Affero General Public License for more details.

/* You should have received a copy of the GNU Affero General Public License
/* along with this program.  If not, see http://www.gnu.org/licenses/.


@import compass/css3

$bg: #fff
$fg: #000
$sel: #00f
$moving: #f00
$selmoving: #f0f

.hidden
  display: none

.draggable
  cursor: move !important

body, html
  color: $fg
  background-color: $bg
  height: 100%
  margin: 0
  padding: 0
  display: -webkit-flex
  display: flex
  -webkit-flex-direction: column
  flex-direction: column
  > header
    h1
      font-size: 2em
      margin: .5em

body > section
  -webkit-flex: 1
  flex: 1
  display: -webkit-flex
  display: flex
  -webkit-flex-direction: column
  flex-direction: column

  #main
    -webkit-user-select: none
    -moz-user-select: none
    -webkit-flex: 1
    flex: 1
    display: -webkit-flex
    display: flex
    -webkit-flex-direction: row
    flex-direction: row

    article
      -webkit-flex: 1
      flex: 1
      position: relative

      .btns
        text-align: center
        position: absolute
        bottom: .5em
        right: .5em

        .btn
          margin: 0 3px 6px 3px

        .glyphicon
          font-size: 20px

    aside
      margin: 0 .5em
      width: 100px

      h3
        text-align: center
        margin: 0 0 .5em
        font-size: 1.25em

      .icons
        overflow-y: auto

        .icon
          min-width: 100%
          max-width: 100%
          height: 100%
          margin: 0 0 6px

footer
  display: -webkit-flex
  display: flex

  h4
    -webkit-flex: 1
    flex: 1
    margin: 0
    padding: 0

    &:last-of-type
      -webkit-flex: 2
      flex: 2
      text-align: right

#overlay
  visibility: hidden
  position: absolute
  left: 0px
  top: 0px
  width: 100%
  height: 100%
  text-align: center
  z-index: 1000
  background-color: rgba(0, 0, 0, .2)

  &.visible
    visibility: visible

  div
    width: 30%
    margin: 100px auto
    background-color: rgba(255, 255, 255, .6)
    border: 1px solid #000
    padding: 15px
    text-align: center

  textarea
    border: 1px solid #888
    width: 100%
    height: 75px

#diagram
  box-shadow: 0 0 15px #aaa inset

svg
  #title
    text-anchor: middle
    font-size: 21px

  #Arrow
    fill: transparent
    stroke: $fg

  #BlackArrow
    fill: $fg
    stroke: $fg

  #WhiteArrow, #WhiteDiamond
    fill: $bg
    stroke: $fg

  #grid
    path
      fill: transparent
      stroke: rgba(0, 0, 255, .12)

  .background.move
    cursor: move

  text
    text-anchor: middle
    font-family: "sans"
    font-size: 14px

    /* tspan
      /* dominant-baseline: text-before-edge

  .ghost
    +transition(stroke 500ms)

    &:hover
      stroke: rgba(0, 0, 255, .1)

    &:active
      stroke: rgba(0, 0, 255, .2)

  .link
    .dashed
      stroke-dasharray: 5 5

    .ghost
      fill: none
      stroke-width: 30
      stroke: rgba(0, 0, 255, 0)

  .group
    .ghost
      cursor: crosshair

  .link, .element, .group
    &:hover .shape
      stroke-width: 2

  .shape
    +transition(stroke-width 500ms)
    stroke: $fg
    stroke-width: 1.3

  .selected
    .shape
      stroke: $sel

    &.moving
      .shape
        stroke: $selmoving

  .moving
    .shape
      stroke: $moving

  .link
    .shape
      fill: none

    text
      fill: $fg
      stroke: none

  .element, .group
    cursor: move

    .shape
      &.fill-bg
        fill: $bg

      &.fill-fg
        fill: $fg

      &.fill-none
        fill: transparent

    .ghost
      fill: transparent
      stroke: none

    .handle, .anchor
      +transition(fill 500ms, stroke 500ms)
      fill: rgba(0, 0, 0, 0)
      stroke: rgba(0, 0, 0, 0)

    .handle
      &.NW
        cursor: nw-resize
      &.NE
        cursor: ne-resize
      &.SW
        cursor: sw-resize
      &.SE
        cursor: se-resize
      &.O
        cursor: crosshair

    .anchor
      cursor: pointer

    &.selected
      .handle
        fill: rgba(0, 0, 0, .025)
        stroke: rgba(0, 0, 0, .15)

      .anchor
        fill: rgba(255, 0, 0, .025)
        stroke: rgba(255, 0, 0, .25)

    &:hover
      .handle
        fill: rgba(0, 0, 0, .05)
        stroke: rgba(0, 0, 0, .3)

      .anchor
        fill: rgba(255, 0, 0, .05)
        stroke: rgba(255, 0, 0, .5)

  &.linking
    .anchor
      fill: rgba(0, 255, 0, .05)
      stroke: rgba(0, 255, 0, .7)

      &.active
        fill: rgba(0, 255, 0, .5)
        stroke: rgba(0, 255, 0, 1)

  .underlay
    .selection
      fill: rgba(0, 255, 0, .05)
      stroke: rgba(0, 255, 0, .3)

  .overlay
    .selection
      fill: rgba(0, 0, 255, .05)
      stroke: rgba(0, 0, 255, .3)
      stroke-width: 2

/* svg.icon
  /* text
    /* dominant-baseline: text-before-edge

textarea.dot
  float: left
  display: block
  width: 70%
  min-height: 400px
  margin: 0 1em 1em
