/* This file is part of umlaut

/* Copyright (C) 2013 Kozea - Mounier Florian <paradoxxx.zero->gmail.com>

/* umlaut is free software: you can redistribute it and/or modify
/* it under the terms of the GNU Affero General Public License as
/* published by the Free Software Foundation, either version 3 of the
/* License, or any later version.

/* umlaut is distributed in the hope that it will be useful,
/* but WITHOUT ANY WARRANTY; without even the implied warranty of
/* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
/* GNU Affero General Public License for more details.

/* You should have received a copy of the GNU Affero General Public License
/* along with this program.  If not, see http://www.gnu.org/licenses/.


@import compass/css3
@import flexbox
@import compass/typography/text/replacement

$bg: #fff
$fg: #000
$sel: #00f
$moving: #f00
$selmoving: #f0f

.hidden
  display: none

.draggable
  cursor: move !important

body, html
  color: $fg
  background-color: $bg
  height: 100%
  margin: 0
  padding: 0
  +display-flex
  +flex-direction(column)
  > header
    h1
      font-size: 2em
      margin: .5em

header
  h1
    background: url("../images/umlaut.svg") center no-repeat
    margin: 0
    height: 131px

    a
      +squish-text

body
  #editor
    +flex(1)
    +display-flex
    +flex-direction(column)
    margin: 1em
    margin-right: 0

  #diagrams
    margin: 1em
    li
      list-style: none

    .dot2umlaut
      margin-top: 1em

    td i
      margin: 0 .5em

  #main
    -webkit-user-select: none
    -moz-user-select: none
    +flex(1)
    +display-flex
    flex-direction: row

    .waterlogo
      background: url("../images/umlaut.svg") bottom center no-repeat
      max-width: calc(30% - 100px)
      background-size: 100%
      opacity: .6
      position: absolute
      left: 10px
      bottom: 10px
      height: 131px
      width: 333px

    .btns
      text-align: center
      position: absolute
      bottom: 24px
      right: 124px
      max-width: calc(75% - 100px)

      .btn
        margin: 0 3px 6px 3px

      .glyphicon
        font-size: 20px

    .outside
      +flex(1)
      +display-flex
      +flex-direction(column)

      .inside
        +flex(1)

    aside
      padding: 0 0.5em 0 0
      margin: 0 0 0 0.5em
      width: 100px
      overflow-y: auto

      h3
        text-align: center
        margin: 0 0 .5em
        font-size: 1.25em

      .icons
        overflow-y: auto
        +display-flex
        +flex-direction(column)

        .icon
          margin: 0 0 6px
          width: 100%
          height: auto

  .colpick
    z-index: 2000

footer
  +display-flex

  h4
    +flex(1)
    margin: 0
    padding: 0b

    &:last-of-type
      flex: 2
      text-align: right

#overlay
  visibility: hidden
  position: absolute
  left: 0px
  top: 0px
  width: 100%
  height: 100%
  text-align: center
  z-index: 1000
  background-color: rgba(0, 0, 0, .2)

  &.visible
    visibility: visible

  > div
    width: 30%
    margin: 100px auto
    background-color: rgba(255, 255, 255, .8)
    border: 1px solid #000
    padding: 15px
    text-align: center

    .fg-box
      float: left

    .bg-box
      float: right

    .bottom-tip
      clear: both
      padding-top: 1em
      color: #888

    .color-box
      display: inline-block
      width: 30px
      height: 30px
      background-color: rgba(255, 255, 255, .6)
      vertical-align: middle

  textarea
    border: 1px solid #888
    width: 100%
    height: 75px
    margin-bottom: .5em

#diagram
  box-shadow: 0 0 15px #aaa inset

svg
  .fill-bg
    fill: $bg

  .fill-fg
    fill: $fg

  .fill-none
    fill: transparent

  .stroke-bg
    stroke: $bg

  .stroke-fg
    stroke: $fg

  .stroke-none
    stroke: transparent

  #title
    text-anchor: middle
    font-size: 28px

  #grid
    path
      fill: transparent
      stroke: rgba(0, 0, 255, .12)

  .background.move
    cursor: move

  text
    text-anchor: middle
    font-family: "sans"
    font-size: 14px

  .ghost
    +transition(stroke 500ms)

    &:hover
      stroke: rgba(0, 0, 255, .1)

    &:active
      stroke: rgba(0, 0, 255, .2)

  .link
    .dashed
      stroke-dasharray: 5 5

    .ghost
      fill: none
      stroke-width: 30
      stroke: rgba(0, 0, 255, 0)

  .group
    .ghost
      cursor: crosshair

  .link, .element, .group
    &:hover .shape
      stroke-width: 2

  .shape
    +transition(stroke-width 500ms)

  .shape
    stroke: $fg
    stroke-width: 1.3

  .selected
    .shape
      stroke: $sel

    &.moving
      .shape
        stroke: $selmoving

  .moving
    .shape
      stroke: $moving

  .link
    .shape
      fill: none

    text
      fill: $fg
      stroke: none

  .element, .group
    cursor: move

    .ghost
      fill: transparent
      stroke: none

    .handle, .anchor
      +transition(fill 500ms, stroke 500ms)
      fill: rgba(0, 0, 0, 0)
      stroke: rgba(0, 0, 0, 0)

    .handle
      &.NW
        cursor: nw-resize
      &.NE
        cursor: ne-resize
      &.SW
        cursor: sw-resize
      &.SE
        cursor: se-resize
      &.O
        cursor: crosshair

    .anchor
      cursor: pointer

    &.selected
      .handle
        fill: rgba(0, 0, 0, .025)
        stroke: rgba(0, 0, 0, .15)

      .anchor
        fill: rgba(255, 0, 0, .025)
        stroke: rgba(255, 0, 0, .25)

    &:hover
      .handle
        fill: rgba(0, 0, 0, .05)
        stroke: rgba(0, 0, 0, .3)

      .anchor
        fill: rgba(255, 0, 0, .05)
        stroke: rgba(255, 0, 0, .5)

  &.linking
    .anchor
      fill: rgba(0, 255, 0, .05)
      stroke: rgba(0, 255, 0, .7)

      &.active
        fill: rgba(0, 255, 0, .5)
        stroke: rgba(0, 255, 0, 1)

  .selection
    fill: rgba(0, 0, 255, .05)
    stroke: rgba(0, 0, 255, .3)
    stroke-width: 2


@media screen and (max-width: 780px)
  #overlay div
    width: 50%

  body > section
    margin: 0

    #main
      .btns
        position: static
        max-width: 100%

        .glyphicon
          font-size: 12px

@media screen and (max-width: 480px)
  #overlay div
    width: 80%

  body > section
    &#editor
      margin: 1em

    #main
      +flex-direction(column)

      > .outside
        flex: 4

      > .sidebar
        +flex(1)
        width: auto

        .icons
          +flex-direction(row)
          +flex-wrap(wrap)
          .icon
            width: 20%
            height: 40px


@-moz-document url-prefix()
  @media screen and (max-width: 480px)
    body > section
      #main
        > .sidebar
          .icons
            display: block
