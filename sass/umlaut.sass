@import compass/css3

$bg: #fff
$fg: #000
$sel: #00f
$moving: #f00
$selmoving: #f0f

.hidden
  display: none

.draggable
  cursor: move !important

body, html
  color: $fg
  background-color: $bg
  height: 100%
  margin: 0
  padding: 0
  display: -webkit-flex
  display: flex
  -webkit-flex-direction: column
  flex-direction: column
  > header
    h1
      font-size: 2em
      margin: .5em

body > section
  -webkit-flex: 1
  flex: 1
  display: -webkit-flex
  display: flex
  -webkit-flex-direction: column
  flex-direction: column

  #main
    -webkit-user-select: none
    -moz-user-select: none
    -webkit-flex: 1
    flex: 1
    display: -webkit-flex
    display: flex
    -webkit-flex-direction: row
    flex-direction: row

    article
      -webkit-flex: 1
      flex: 1
      position: relative

      header
        h2
          position: absolute
          text-align: center
          width: 100%
          white-space: pre

      .btns
        text-align: center
        position: absolute
        bottom: .5em
        right: .5em

        .btn
          margin: 0 3px 6px 3px

        .glyphicon
          font-size: 20px

    aside
      margin: 0 .5em
      width: 100px

      h3
        text-align: center
        margin: 0 0 .5em
        font-size: 1.25em

      .icons
        overflow-y: auto

        .icon
          min-width: 100%
          max-width: 100%
          height: 100%
          margin: 0 0 6px

footer
  display: -webkit-flex
  display: flex

  h4
    -webkit-flex: 1
    flex: 1
    margin: 0
    padding: 0

    &:last-of-type
      -webkit-flex: 2
      flex: 2
      text-align: right

#overlay
  visibility: hidden
  position: absolute
  left: 0px
  top: 0px
  width: 100%
  height: 100%
  text-align: center
  z-index: 1000
  background-color: rgba(0, 0, 0, .2)

  &.visible
    visibility: visible

  div
    width: 30%
    margin: 100px auto
    background-color: rgba(255, 255, 255, .6)
    border: 1px solid #000
    padding: 15px
    text-align: center

  textarea
    border: 1px solid #888
    width: 100%
    height: 75px

#diagram
  box-shadow: 0 0 15px #aaa inset

svg
  #grid
    path
      fill: transparent
      stroke: rgba(0, 0, 255, .12)

  .underlay.move
    cursor: move

  text
    text-anchor: middle
    font-family: "sans"

    tspan
      dominant-baseline: text-before-edge

  .link
    +transition(stroke-width 500ms)
    fill: none
    stroke: $fg
    stroke-width: 1.3

    text
      fill: $fg
      stroke: none

    &.selected
      stroke: $sel

    &:hover
      stroke-width: 3

  .element
    cursor: move

    .shape
      stroke: $fg
      fill: $bg
      stroke-width: 1.3

    &.moving
      .shape
        stroke: $moving

    &.selected
      .shape
        stroke: $sel

    &.selected.moving
      .shape
        stroke: $selmoving

  .overlay
    .selection
      fill: rgba(0, 0, 255, .05)
      stroke: rgba(0, 0, 255, .3)
      stroke-width: 2

svg.icon
  text
    dominant-baseline: text-before-edge

